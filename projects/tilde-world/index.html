<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/styles/main.css?v=2" />
    <link href="https://mastodon.spotek.io/@dustin" rel="me" />
    <link href="https://defcon.social/@dstn" rel="me" />
    <link href="https://toki.social/@0xdstn" rel="me" />
    <title>Tilde world | 0xdstn</title>
  </head>
  <body>
    <header>
      <a href="/">0xdstn</a>
      <a href="/hello">hello</a>
      <a href="/writing">writing</a>
      <a href="/thoughts">thoughts</a>
      <a href="/wiki/library">reading</a>
      <a href="/feeds">feeds</a>
    </header>
	<article>
<a href="/projects">..</a><h1><span class="emoji">&#128187;</span> Tilde world</h1><p>Tilde world (~world) is a flat-file, community powered, text adventure game intended to be run on tilde servers.</p><p><strong>Source code:</strong> <a href="https://github.com/0xdstn/tilde-world" target="_blank">https://github.com/0xdstn/tilde-world</a></p><p><strong>~town map:</strong> <a href="https://tilde.town/~dustin/world/" target="_blank">https://tilde.town/~dustin/world/</a></p><ol><li><a href="#Description">Description</a></li><li><a href="#Creating rooms">Creating rooms</a></li><li><a href="#Objects">Objects</a></li><li><a href="#Props and actions">Props and actions</a></li><li><a href="#Action instructions">Action instructions</a></li><li><a href="#Game commands">Game commands</a></li><li><a href="#Future plans">Future plans</a></li><li><a href="#Release notes">Release notes</a></li></ol><h2 id="Description">Description</h2><p>Tilde world can be run on tilde.town by running <strong>~dustin/projects/tilde-world/world.py</strong>. When you first run it it will welcome you and ask your character's name and description.</p><p>When you finish the setup it will create a <strong>~/.world</strong> directory with some configuration files and a <strong>rooms</strong> directory where you can create your own rooms (see below).</p><p>Your name and description is saved in <strong>~/.world/config</strong>.</p><p>When the game is looking for a room at a coordinate, it will loop through all of the users on the server and check for that coordinate in their <strong>.world/rooms</strong> directory. The first one found is used, if there are duplicates (try not to step on each other's toes please).</p><p>Your current position is saved in <strong>~/.world/loc</strong> in the format <strong>x,y</strong>.</p><p>Your inventory is saved in <strong>~/.world/inventory</strong>. Each item goes on one line in the format <strong>key : x,y</strong>. The x,y is the room the object came from so we can reference it's data again.</p><p>The state for props are saved in `~/.world/state`. It saves in the format <strong>object_prop.txt</strong>. As props change via user interaction, these files are updated. They are created upon entering a room with an object that has a prop.</p><h2 id="Creating rooms">Creating rooms</h2><p>You can create your own rooms by placing files in the <strong>~/.world/rooms</strong> directory.</p><p>The files are named for their coordinates in the format <strong>x_y</strong>. Negative coordinates use an "n" instead of "-". So a room at coordinate <strong>-1 0</strong> would be a file named <strong>n1_0</strong>.</p><p>A basic room looks like this:</p><pre>NAME : Landing room<br>DESC : An ordinary room<br></pre><p>Rooms have the following properties available:</p><ul><li><code>NAME</code> - The name of the room</li><li><code>DESC</code> - A description of the room. This is displayed with the <strong>look</strong> command</li><li><code>KEY</code> - Optional. An ID and name of an item required to enter this room from any direction in this format: <strong>west-key|West room key</strong></li><li><code>TELEPORT</code> - Optional. x,y coordinates to redirect the user to if they teleport here (such as the start of a dungeon).</li></ul><h2 id="Objects">Objects</h2><p>A room can contain multiple objects. A room with objects would look like this:</p><pre>DESC : An ordinary room<br>OBJECTS<br>  -<br>   ID : sword<br>   NAME : wooden sword<br>   GRAB : true<br>   DESC : A wooden sword in good condition<br> -<br>   ID : shield<br>   NAME : wooden shield<br>   GRAB : true<br>   DESC : A wooden shield in good condition<br></pre><p>Objects have the following properties available:</p><ul><li><code>ID</code> - A unique identifier for referencing the object</li><li><code>NAME</code> - The name of the object</li><li><code>DESC</code> - A description of the object displayed with <strong>look obj_id</strong>. You can reference props with [propkey], and they will automatically be replaced with the value of the prop</li><li><code>GRAB</code> - (Optional, default false) <strong>true</strong> or <strong>false</strong>, if the item can be picked up by a user</li><li><code>HIDDEN</code> - (Optional, default false) <strong>true</strong> or <strong>false</strong>, if the item is listed in the room with the <strong>look</strong> command</li><li><code>ACTIONS</code> - (Optional) A list of actions, see below</li><li><code>PROPS</code> - (optional) A list of props, see below</li></ul><h2 id="Props and actions">Props and actions</h2><p>Objects can have props and actions.</p><p>Props are key/value pairs. They will be stored in a file specific to the room/prop and the user. That means that whatever state a room and it's objects are in for one user does not affect it for another user.</p><p>Actions are a list of triggers and a list of instructions.</p><p>Here is an object with a prop and an action:</p><pre>  -<br>   ID : lamp<br>   NAME : ordinary lamp<br>   GRAB : false<br>   DESC : A lamp with a switch. It is currently [power].<br>   PROPS<br>     power=off<br>   ACTIONS<br>     turn|switch|push|pull<br>       IF power=on<br>       SET power=off<br>       ECHO You turn off the lamp<br>       ELSE<br>       SET power=on<br>       ECHO You turn on the lamp<br>       ENDIF<br></pre><p>When the user runs <strong>turn lamp</strong> it will either turn the power prop on or off depending on if it is currently set to on or off.</p><h2 id="Action instructions">Action instructions</h2><p>Actions currently support the following:</p><ul><li><code>IF (prop)=(value)</code> - If prop of the item is the provided value, all following instructions until an <strong>ELSE</strong> or <strong>ENDIF</strong> will be run</li><li><code>IF INVENTORY=(item1,item2)</code> - If the inventory contains the provided item(s), all following instructions until an <strong>ELSE</strong> or <strong>ENDIF</strong> will be run</li><li><code>ELSE</code> - Placed between an <strong>IF</strong> and <strong>ENDIF</strong>. If the IF statement is false, all following instructions until an <strong>ENDIF</strong> will be run</li><li><code>ECHO (message)</code> - Prints out the provided message. Props will be replaced with their value in the format [prop]</li><li><code>GRAB (object)</code> - Adds the provided object key to the inventory (must also be in the same room, hidden or not)</li><li><code>TELEPORT (x) (y)</code> - Teleports to provided x,y coordinates</li><li><code>PROMPT (prop)|(message)</code> - Prompts the user with the message. Their input is stored in the provided prop</li></ul><h2 id="Game commands">Game commands</h2><p>As a user of the game you can run the following commands:</p><ul><li><code>look</code> - View the room along with it's objects and exits</li><li><code>look (object)</code> - View the provided object and it's actions</li><li><code>grab (object)</code> - Add the provided object to the inventory</li><li><code>drop (object)</code> - Remove the provided object from the inventory</li><li><code>(action) (object)</code> - Runs the provided action on the provided object</li><li><code>inventory</code> - List the inventory</li><li><code>go (direction)</code> - Go the provided direction (north,south,east,west)</li><li><code>teleport (x) (y)</code> - Go to the provided coordinates</li><li><code>quit</code> - Quit ~world</li><li><code>help</code> - Displays the help menu</li><li><code>about</code> - Displays information about the author and project</li></ul><h2 id="Future plans">Future plans</h2><ul><li>Add more action logic</li></ul><h2 id="Release notes">Release notes</h2><ul><li><code>v1.1.2</code> Added PROMPT action instruction. Updated ECHO to support displaying props</li><li><code>v1.1.1</code> Added TELEPORT prop to rooms  to provide x,y coordinates to redirect the user to if they teleport to the room (such as the start of a dungeon)</li><li><code>v1.1.0</code> Changed inventory system so you can use item actions after grabbing them</li><li><code>v1.0.2</code> Added TELEPORT action instruction</li><li><code>v1.0.1</code> Added help and about commands</li><li><code>v1.0.0</code> Initial release with base functionality</li></ul><blockquote class="thanks"> <span class="emoji">&#128075;</span> Hey! Thanks for reading! If you have any comments or questions about this post, or anything else, I'd love to chat! You can find the best way to contact me on my <a href="/hello">hello page</a> or send me an <a href="mailto:0xdstn@protonmail.com?subject=RE: Tilde world">email</a>.</blockquote>		</article>
		<footer>
			<p>
			<a href="https://webring.xxiivv.com/#random" target="_blank" class="webring">
				<img src="https://webring.xxiivv.com/icon.black.svg" alt="webring"/>
			</a>
			</p>
		</footer>
	</body>
</html>

